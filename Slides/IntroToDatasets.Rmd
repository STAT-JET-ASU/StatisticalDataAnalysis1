---
title: "Intro to Datasets"
author: "Author: Jill E. Thomley"
date: 'Updated: `r format(Sys.time(), "%A, %B %d, %Y @ %X")`'
output: ioslides_presentation
---

```{r global_options, include=FALSE}
knitr::opts_chunk$set(comment = "", message = FALSE, warning = FALSE)
```

## Before We Begin...

These slides assume that you have completed the DataCamp course [Introduction to R](https://www.datacamp.com/courses/free-introduction-to-r).

It would also be helpful to read beforehand Chapter 2 of the digital text [*Modern Dive*](https://moderndive.com/).

These slides are not meant to be standalone information, but rather a guide for hands-on lecture. Be prepared to take notes to flesh out the contents. 

I recommend that you create an R Markdown document where you can include information and code from the slides as well as your own additional notes and explorations.

These slides were produced using R Markdown. See "[4.1 ioslides presentation](https://bookdown.org/yihui/rmarkdown/ioslides-presentation.html)" in [*R Markdown: The Definitive Guide*](https://bookdown.org/yihui/rmarkdown/).


## Data vs. Information

Statistical methods help us transform raw data into information that provides knowledge and helps us make decisions.

* We use descriptive statistics to summarize datasets or make comparisons between datasets, but we do not go beyond the data we actually have. 

* In inferential statistics, sample data are used to generalize or make predictions about the larger population from which the sample was selected.

* Data visualization is important for exploration, verification, and presentation of statistical results.

We will often talk about the distribution of a particular variable, which describes how often the possible responses occur.


##

<p style="text-align:center;"><img src="https://cdn-images-1.medium.com/max/1200/1*i7WFO9wP0wB-nv3YrkrMPg.png" width = 500></p>

We process raw data with statistical methods to extract usable information. But that is only part of the story! To give statistical results meaning and learn from them, we must interpet them in the appropriate context.


## Population vs. Sample

A sample is a subset selected from some larger population of interest. The  population is defined by the research question(s) being investigated. It is the complete set of people, objects, or entities in which we are interested.

* A summary measure for a population is called a parameter.

* A summary measure for a sample is called a statistic.

Sample statistics are used to estimate population parameters.

If we collect data from a whole population, it is called a census.

The definining characteristics of theoretical probability models are also referred to as parameters.


## Dataset Structure

* A variable is some characteristic of interest that can differ between individuals in a population.

* An observational unit (or observation) is a single individual, object, or entity about which we have collected data for one or more characteristics (variables).

* An observation may be called a case, subject, or participant.

* Ideally, each observational unit has a value for each variable.

A dataset is a collection of data values for the observations and variables in a study (e.g., survey or experiment). A common way to arrange data is to put variables in columns and observations in rows. This is what we call `tidy` data. 


## `tidy` Data

<p style="text-align:center"><img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" width = 775><br>
Tidy data graphic from http://r4ds.had.co.nz/tidy-data.html</p>

<p>Most of the data we will work with in STT3850 is already in `tidy` format, though there may be missing data and other issues we have to address before conducting analyses.</p>


## Types of Variables

* categorical / qualitative
    + nominal
    + ordinal

* numerical / quantitative
    + interval
    + ratio

Numerical variables are also classified as discrete or continuous.

Ranks are technically ordinal data, but sometimes we treat them as if they are numbers (e.g., reporting average rank).

How might these correspond to different classes of vectors in R?


## Exploratory Data Analysis (EDA)

We use EDA to "examin[e] and describ[e] data to gain insight, discover structure, and detect anomalies and outliers."

<p style="text-align:center"><img src="images/john_tukey.jpg" height = 250></p>

John Tukey (1915--2000), author of _Exploratory Data Analysis_ (1977) referred to EDA as numerical, counting, and graphical detective work.


## Reading Data into R

Many different types of data files can be read into R. We will be using primarily CSV files read from the web using their URL. Our [class data files](https://stat-jet-asu.github.io/Datasets/DatasetList.html) page contains links to many datasets provided by the textbook or created by the instructor.

Use the `read.csv()` function to input the CSV file using its URL. 

The `read.csv()` function converts a CSV file into a data frame. 

`draft <- read.csv(file = url("https://raw.githubusercontent.com/STAT-JET-ASU/Datasets/master/Instructor/vietnamdraft.csv"))`

The `readr` package contains the function `read_csv()`. Create `draft_alt` using this function. How do `draft` and `draft_alt` differ? Let's explore and discuss!

```{r include=FALSE}
draft <- read.csv(file = url("https://raw.githubusercontent.com/STAT-JET-ASU/Datasets/master/Instructor/vietnamdraft.csv"))

library(readr)
draft_alt <- read_csv(file = url("https://raw.githubusercontent.com/STAT-JET-ASU/Datasets/master/Instructor/vietnamdraft.csv"))
```


## Data Frame vs. Tibble

A data frame is a two dimensional structure or array in R. It is a special case of a list where each component (column) has equal length. Each column can contain a different variable type.

A tibble is a somewhat tweaked version of a data frame found in the `tidyverse`. For more, see [Tibbles](http://r4ds.had.co.nz/tibbles.html) in _R for Data Science_.

Before doing any kind of data modeling or inference, you need to explore your dataset and become familiar with its structure and contents---that's the first step in EDA!

We will be using the `dplyr` and `ggplot2` packages for our EDA. These and other tools are collected in `tidyverse`.


## Reminders Before We Proceed

When you apply any function() to an object in R, pay attention to what kind of object that function outputs. Is it a vector? Matrix? List? Other? Since the output of one function is often the input to another, you need to know!

We can access columns of a `data.frame` (or any list) using the `$` operator, as below: 

* `dataset_name$column_name`

* `list_name$list_component`

We can access elements of vectors, matrices, and data frames using `[]` (indices) to indicate locations within the array. Vectors use one index `[i]`. Matrices require a row and column `[i,j]`.


## Structure vs. Glimpse

The `str()` function is part of base R code, while the `glimpse()` function comes from the `tidyverse` package `dplyr`.

```{r}
str(draft)
```

Try using `str()` on `draft_alt`. Compare the results.

##

These two functions are very similar, but how does the output of `glimpse()` differ from `str()`?

```{r}
library(tidyverse)
glimpse(draft)
```

Try using `glimpse()` on `draft_alt`. Compare the results.


## Other Useful Functions

Other functions for exploring dataset structure are given below. Use them on the Vietnam Draft dataset. What do they tell you?

* `attributes()`
* `dim()`
* `names()`
* `nrow()`
* `ncol()`
* `head()`
* `tail()`
* `sum(complete.cases())` # this is two nested functions
* `sum(!complete.cases())` # what does the ! do?


## Data Summaries

Once we know the overall structure of our dataset, we need to understand its contents. Later we will explore specific functions like `mean()` and `sd()`, as well as `summarize()` in `dplyr`, but we can get an overview using `summary()`.

```{r}
summary(draft)
```


## Missing Data Values

In some datasets, every variable had a value for every case. That is frequently *not* true in real-life data. Missing data values need special treatment and should be found during EDA. 

Missing quantitative values and missing categorical values may be stored or displayed differently.

* The [couples.csv](https://raw.githubusercontent.com/STAT-JET-ASU/Datasets/master/Instructor/couples.csv) dataset contains the height (in mm) and age (in years) for a sample of married couples. 

* The [personalitySTT3850.csv](https://raw.githubusercontent.com/STAT-JET-ASU/Datasets/master/Instructor/personalitySTT3850.csv) dataset contains Jungian (Myers-Briggs) personality type and other selected information about students from Dr. Thomley's past STT3850 classes.

Use the exploratory functions to discover which can help us find missing values in these datasets.


## More About Missing Values

The `which()` function can help identify the locations of missing values when paired with the `is.na()` function. The result is the row numbers of the NA cases. 

```{r}
which(is.na(draft$draftnumber) == TRUE)
index <- which(is.na(draft$draftnumber) == TRUE)
draft[index,]
```


## More About Indices

```{r}
draft[index, 1:3]
draft[index, "day"]
draft[index, c("month", "day", "draftyear")]
```


## Explore some more datasets!

Try exploring some of the datasets presented and discussed in Chapter 1 of your  *Mathematical Statistics with Resampling and R, 2nd Edition* textbook. 

You can find the textbook data files on our [class data files](https://stat-jet-asu.github.io/Datasets/DatasetList.html) page or in the `resampledata` package.

Practice so you become proficient in determining the structure of a dataset so you can start the work of transforming raw data into useful information and knowledge.

